<%- include('../includes/head.ejs') %>
</head>

<body>
    <%- include('../includes/navigation.ejs') %>
    <!-- Page Wrapper -->
    <div style="background: url(images/bgimg.jpg)" class="page-holder bg-cover">
        <!-- HEADER START -->
        <div class="container py-5">
            <header class="text-center text-white">
                <h1 class="display-4 font-weight-bold mb-4 page-titles">Settings
            </header>
            <!-- HEADER END -->
            <!-- MAIN CONTENT START -->
            <main div class="text-white vh-auto background-transparency">
                <% if (errorMessage) { %>
                    <div><%= errorMessage%></div>
                <% } %>
                <% if (successMessage) { %>
                    <div><%= successMessage%></div>
                <% } %>

                <!-- Go Back and Logout row -->
                <div class="row">
                    <div class="col-6 text-left pl-5">
                        <a href="#" onclick="goBack()">
                            <img src="images/icon-go-back.png" width="10%" height="auto"><br />
                            Go Back
                        </a>
                    </div>
                    <div class="col-6 text-right pr-5">
                        <p>
                            <!-- <a href="/logout">
                                <img src="images/icon-sign-out.png" width="10%" height="auto"><br />
                                Logout
                            </a> -->
                            <form action="/log-out" method="post">
                                <div>
                                <input type="image" src="images/icon-sign-out.png" width="10%" height="auto" alt="Submit feedback"><br />
                                Logout
                                </div>
                            </form>
                        </p>
                    </div>
                </div>

                <div class="container-fluid">
                    <div class="row">
                        <!-- Col 1 -->
                        <div class="col-6">
                            <p class="lead">User Account Settings</p>

                            <form action="/action_page.php" class="needs-validation" novalidate>
                                <div class="form-group">
                                    <!-- EMAIL -->
                                    <label for="change_email">Change Email:</label>
                                    <input type="text" class="form-control" id="change_email"
                                        placeholder="Enter new email" name="change_email" required>
                                    <div class="valid-feedback">Valid.</div>
                                    <div class="invalid-feedback">Please fill out this field.</div>
                                </div>
                                <button type="submit" class="btn btn-success">Submit</button>

                                <div class="form-group">
                                    <!-- PHONENUMBER -->
                                    <label for="change_phonenumber" class="pt-3">Change Phone number :</label>
                                    <input type="number" class="form-control" id="change_phonenumber"
                                        placeholder="Enter new number" name="change_phonenumber" required>
                                    <div class="valid-feedback">Valid.</div>
                                    <div class="invalid-feedback">Please fill out this field.</div>
                                </div>
                                <button type="submit" class="btn btn-success">Submit</button>

                                <div class="form-group">
                                    <!-- PASSWORD -->
                                    <label for="change_pwd" class="pt-3">Password:</label>
                                    <input type="password" class="form-control" id="change_pwd"
                                        placeholder="Enter new password" name="change_pwd" required>
                                    <div class="valid-feedback">Valid.</div>
                                    <div class="invalid-feedback">Please fill out this field.</div>
                                    <!-- CONFIRM PASSWORD -->
                                    <label for="change_pwd" class="pt-3">Confirm Password:</label>
                                    <input type="password" class="form-control" id="change_pwd"
                                        placeholder="Enter new password" name="change_pwd" required>
                                    <div class="valid-feedback">Valid.</div>
                                    <div class="invalid-feedback">Please fill out this field.</div>
                                </div>
                                <button type="submit" class="btn btn-success">Submit</button>
                            </form>

                            <div class="row pt-5">
                                <div class="col-6 text-center">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn btn-danger" data-toggle="modal"
                                        data-target="#deleteAccount">
                                        DELETE ACCOUNT
                                    </button>

                                    <!-- Modal -->
                                    <div class="modal fade" id="deleteAccount" data-backdrop="static"
                                        data-keyboard="false" tabindex="-1" aria-labelledby="deleteAccountLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content text-dark text-monospace">
                                                <div class="modal-header">
                                                    <h5 class="modal-title w-100 text-center" id="deleteAccountLabel">
                                                        <div class="text-danger">
                                                            !!WARNING!!
                                                        </div>
                                                    </h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <p class="text-center">
                                                        Deleting your account is a
                                                        <strong>permanent</strong> action.
                                                    </p>
                                                    <p class="text-left">Once you delete your account you will never
                                                        recover it back!
                                                        Are you absolutely sure you wish to delete your account forever?
                                                    </p>

                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-success"
                                                        data-dismiss="modal">NO TAKE ME BACK!</button>
                                                    <button type="button" class="btn btn-danger">Yes. It's been a
                                                        pleasure.</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 text-center">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn btn-danger" data-toggle="modal"
                                        data-target="#requestData">
                                        REQUEST DATA
                                    </button>

                                    <!-- Modal -->
                                    <div class="modal fade" id="requestData" data-backdrop="static"
                                        data-keyboard="false" tabindex="-1" aria-labelledby="requestDataLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content text-dark text-monospace">
                                                <div class="modal-header">
                                                    <h5 class="modal-title w-100 text-center" id="requestDataLabel">
                                                        <div class="text-danger">
                                                            Requesting Personal Data
                                                        </div>
                                                    </h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <p class="text-center">
                                                        Requests can take up to <strong>72</strong> hours to be
                                                        fulfilled.
                                                    </p>
                                                    <p class="text-left">
                                                        We are committed to safely storing your data. However please note, that once the data
                                                        leaves our systems it is no longer in a protected domain. &nbsp;
                                                        Your data will arrive to your email inbox <strong>unencrypted</strong>. Please open this 
                                                        email with security precautions in mind. &nbsp;
                                                        Traffle is not responsible for data that is out of our scope. 
                                                    </p>

                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-success"
                                                        data-dismiss="modal">No thank you.</button>
                                                    <button type="button" class="btn btn-danger">Yes please.</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Col 2 -->
                        <div class="col-6">
                            <p class="lead">Subscription Settings</p>

                            <p class="inline-para pr-3">Enable auto renewals?</p>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label>

                            <h5 class="pt-3 text-center pb-3">Setup your exposure</h5>

                            <!-- Help Section -->
                            <div id="accordion">
                                <div class="card">
                                    <div class="card-header bg-light" id="helpHeading">
                                        <h5 class="mb-0">
                                            <button class="btn btn-link collapsed" data-toggle="collapse"
                                                data-target="#help_section" aria-expanded="false"
                                                aria-controls="help_section">
                                                <img src="images/icon-info-squared.png" />
                                                More Information
                                            </button>
                                        </h5>
                                    </div>
                                    <div id="help_section" class="collapse text-dark" aria-labelledby="helpHeading"
                                        data-parent="#accordion">
                                        <div class="card-body">
                                            <p class="lead">Auto Renewals?</p>
                                            <p>
                                                By default, auto renewals are turned off. By enabling automatic renewals
                                                you are
                                                allowing for the current preferences to renew and take payment when your
                                                current
                                                agreement is about to expire. This prevents you from losing out on
                                                potential business
                                                and saving time by continuing business with us.
                                            </p>

                                            <p class="lead">Setting up your exposure</p>
                                            <p>
                                                <ol>
                                                    <li>Set the 'Generate Amount' to the expected number of customers
                                                        you want</li>
                                                    <li>Choose when you want it to start</li>
                                                    <li>Choose finally when you want the membership to expire</li>
                                                </ol>
                                                <p>
                                                    Once the parameters are set you will be given the total number of
                                                    daily views you will receive. This is
                                                    a simple calculation of generated amount / number of days = daily
                                                    views. For example:
                                                </p>

                                                <p>
                                                    5000 / 365 = 14 (13.6, but we round up at Traffle)
                                                </p>

                                                It really is as simple as that. After the details are filled in a
                                                generated price will be displayed
                                                allowing you to accept or reject the price.

                                                After, just fill in the below payment form for a one-time payment
                                                (unless auto renew is enabled)
                                                to seal the deal, and have a receipt emailed to your email address.
                                            </p>

                                            <p class="lead">Coupon Code</p>
                                            <p>
                                                Sometimes Traffle does competitions and random goodwill gestures which
                                                may see
                                                the winner obtain a coupon code. Depending on what the event is behind
                                                the coupon
                                                it will see the winner have a reduction in price.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- BREAK - do not remove. Provides padding between more information and Traffle parameters -->
                            <div class="pt-3"></div>

                            <!-- SETUP TRAFFLE PARAMETERS -->
                            <table class="table table-borderless bg-light rounded">
                                <thead>
                                    <tr>
                                        <th scope="col">Generate Amount:</th>
                                        <th scope="col">Start from:</th>
                                        <th scope="col">End on:</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>
                                            <input type="number" class="form-control" id="number_of_hits"
                                                placeholder="0" name="number_of_hits" required>
                                        </th>
                                        <td><input type="date" name="startdate" placeholder="select start date">
                                        </td>
                                        <td><input type="date" name="enddate" placeholder="select end date">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <h5 class="text-center">Summary of Purchase</h5>

                            <!-- VIEWS PER DAY -->
                            <table class="table table-borderless bg-light rounded">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            <h6>Start:</h6>
                                            <h6>End:</h6>
                                            <h6>Daily Views:</h6>
                                        </th>
                                        <th>
                                            <h6>01/01/2020</h6>
                                            <h6>01/01/2021</h6>
                                            <h6>14 views</h6>
                                        </th>
                                    </tr>
                                </thead>
                            </table>

                            <!-- DISPLAY PRICE START -->
                            <table class="table table-borderless bg-light rounded">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            <h4>Total Price: <p class="paid">£75.00</p>
                                            </h4>
                                        </th>
                                        <th>
                                            <button type="submit" class="btn btn-success">Accept</button>
                                            <button type="submit" class="btn btn-danger">Reject</button>
                                        </th>
                                    </tr>
                                </thead>
                            </table>

                            <!-- CREDIT CARD FORM STARTS HERE -->
                            <div class="bg-light p-3 rounded">
                                <div class="panel panel-default credit-card-box">
                                    <div class="panel-heading display-table">
                                        <div class="row display-tr">
                                            <h3 class="panel-title display-td text-center pb-3">Payment Details
                                            </h3>
                                            <br />
                                            <div class="display-td text-right">
                                                <img class="img-responsive pull-right"
                                                    src="images/icon-credit-card.png">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- CARD NUMBER -->
                                    <div class="panel-body">
                                        <form role="form" id="payment-form">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group pl-3">
                                                        <label for="cardNumber">CARD NUMBER</label>
                                                        <div class="input-group">
                                                            <input type="tel" class="form-control" name="cardNumber"
                                                                placeholder="Valid Card Number" autocomplete="cc-number"
                                                                required autofocus />
                                                            <span class="input-group-addon"><i
                                                                    class="fa fa-credit-card"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- EXP DATE -->
                                            <div class="row">
                                                <div class="col-xs-7 col-md-7">
                                                    <div class="form-group">
                                                        <label for="cardExpiry"><span
                                                                class="hidden-xs">EXPIRATION</span><span
                                                                class="visible-xs-inline">EXP</span>
                                                            DATE</label>
                                                        <input type="tel" class="form-control" name="cardExpiry"
                                                            placeholder="MM / YY" autocomplete="cc-exp" required />
                                                    </div>
                                                </div>
                                                <!-- CV CODE -->
                                                <div class="col-xs-5 col-md-5 pull-right">
                                                    <div class="form-group">
                                                        <label for="cardCVC">CV CODE</label>
                                                        <input type="tel" class="form-control" name="cardCVC"
                                                            placeholder="CVC" autocomplete="cc-csc" required />
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- COUPON -->
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group pl-3">
                                                        <label for="couponCode">COUPON CODE</label>
                                                        <input type="text" class="form-control" name="couponCode" />
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- BUTTON -->
                                            <div class="row">
                                                <div class="col-xs-12 pl-3">
                                                    <button class="btn btn-success btn-lg btn-block" type="submit">
                                                        PAY NOW
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="row" style="display:none;">
                                                <div class="col-xs-12">
                                                    <p class="payment-errors"></p>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!-- CREDIT CARD FORM ENDS HERE -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- If you're using Stripe for payments -->
                <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
        </div>
    </div>
    </div>
    </div>

    </div>
    </main>
    <!-- MAIN CONTENT END -->
    <%- include('../includes/end.ejs') %>
    </div>
</body>